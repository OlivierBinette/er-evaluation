
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>er_evaluation.error_analysis &#8212; ER-Evaluation  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx_lesson.css" />
    <link rel="stylesheet" type="text/css" href="_static/tabs.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/minipres.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="er_evaluation.plots" href="er_evaluation.plots.html" />
    <link rel="prev" title="er_evaluation.metrics" href="er_evaluation.metrics.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="index.html">

  
  
  
  
  
  
  

  
  
    <p class="title logo__title">ER-Evaluation  documentation</p>
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="readme.html">
                        README
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="er_evaluation.html">
                        API Doc
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/OlivierBinette/er-evaluation" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="readme.html">
                        README
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="er_evaluation.html">
                        API Doc
                      </a>
                    </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/OlivierBinette/er-evaluation" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-square-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Section navigation">
  <p class="bd-links__title" role="heading" aria-level="1">
    Section Navigation
  </p>
  <div class="bd-toc-item navbar-nav">
    <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="er_evaluation.data_structures.html">er_evaluation.data_structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="er_evaluation.summary.html">er_evaluation.summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="er_evaluation.metrics.html">er_evaluation.metrics</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">er_evaluation.error_analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="er_evaluation.plots.html">er_evaluation.plots</a></li>
<li class="toctree-l1"><a class="reference internal" href="er_evaluation.estimators.html">er_evaluation.estimators</a></li>
</ul>

  </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="er-evaluation-error-analysis">
<h1>er_evaluation.error_analysis<a class="headerlink" href="#er-evaluation-error-analysis" title="Permalink to this heading">#</a></h1>
<section id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this heading">#</a></h2>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#er_evaluation.error_analysis.count_extra_links" title="er_evaluation.error_analysis.count_extra_links"><code class="xref py py-obj docutils literal notranslate"><span class="pre">count_extra_links</span></code></a></p></td>
<td><p>Count the number of extraneous links to sampled clusters.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#er_evaluation.error_analysis.count_missing_links" title="er_evaluation.error_analysis.count_missing_links"><code class="xref py py-obj docutils literal notranslate"><span class="pre">count_missing_links</span></code></a></p></td>
<td><p>Count the number of missing links to sampled clusters.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#er_evaluation.error_analysis.expected_extra_links" title="er_evaluation.error_analysis.expected_extra_links"><code class="xref py py-obj docutils literal notranslate"><span class="pre">expected_extra_links</span></code></a></p></td>
<td><p>Expected number of extraneous links to records in sampled clusters.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#er_evaluation.error_analysis.expected_missing_links" title="er_evaluation.error_analysis.expected_missing_links"><code class="xref py py-obj docutils literal notranslate"><span class="pre">expected_missing_links</span></code></a></p></td>
<td><p>Expected number of missing links to records in sampled clusters.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#er_evaluation.error_analysis.expected_relative_extra_links" title="er_evaluation.error_analysis.expected_relative_extra_links"><code class="xref py py-obj docutils literal notranslate"><span class="pre">expected_relative_extra_links</span></code></a></p></td>
<td><p>Expected relative number of extraneous links to records in sampled clusters.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#er_evaluation.error_analysis.expected_relative_missing_links" title="er_evaluation.error_analysis.expected_relative_missing_links"><code class="xref py py-obj docutils literal notranslate"><span class="pre">expected_relative_missing_links</span></code></a></p></td>
<td><p>Expected relative number of missing links to records in sampled clusters.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#er_evaluation.error_analysis.splitting_entropy" title="er_evaluation.error_analysis.splitting_entropy"><code class="xref py py-obj docutils literal notranslate"><span class="pre">splitting_entropy</span></code></a></p></td>
<td><p>Splitting entropy of true clusters.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="module-er_evaluation.error_analysis">
<span id="documentation"></span><h2>Documentation<a class="headerlink" href="#module-er_evaluation.error_analysis" title="Permalink to this heading">#</a></h2>
<section id="error-analysis-analyze-errors-based-on-ground-truth-clusters">
<h3>Error Analysis: Analyze Errors Based on Ground Truth Clusters<a class="headerlink" href="#error-analysis-analyze-errors-based-on-ground-truth-clusters" title="Permalink to this heading">#</a></h3>
<p>The <strong>error_analysis</strong> submodule provides a set of tools to analyze errors, given a set of ground truth clusters. These ground truth clusters may correspond to a benchmark dataset which is <em>complete</em> (all of the entities within it are fully resolved and have no missing links), or to a probability sample of ground truth clusters. For more information on the underlying methodology, please refer to [XX].</p>
<p>The key assumptions used for this module are:
1. A <em>predicted</em> clustering is available as a membership vector (named  <cite>prediction</cite> throughout).
2. A set of ground truth clusters is available as a membership vector (named <cite>sample</cite> throughout).</p>
<p>Given these two elements, error metrics are associated to each true entity (corresponding to a cluster in <cite>sample</cite>). The corresponding error space can then be analyzed to identify systematic errors, identify performance disparities, and investigate root causes.</p>
<p><strong>Toy Example</strong></p>
<p>For example, consider the following set of ground truth clusters and predicted clusters of records <span class="math notranslate nohighlight">\(1,2,\dots, 8\)</span>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                    ┌───────┐  ┌─────┐  ┌───┐
                    │ 1   2 │  │  4  │  │ 6 │  ┌───┐
     True clusters: │       │  │     │  │   │  │ 8 │
                    │   3   │  │  5  │  │ 7 │  └───┘
                    └───────┘  └─────┘  └───┘   c4
                        c1        c2      c3

                    ┌───────┐  ┌─────┐  ┌──────────┐
                    │ 1   2 │  │  4  │  │ 6        │
Predicted clusters: ├───────┴──┴─────┤  │        8 │
                    │   3         5  │  │ 7        │
                    └────────────────┘  └──────────┘
</pre></div>
</div>
<p>Assume that the ground truth clusters <cite>c1</cite>, <cite>c2</cite>, and <cite>c4</cite> are available in a benchmark dataset <cite>sample</cite>. Then, we have:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prediction</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c4&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p>The following error metrics, namely the splitting entropy, expected number of extraneous links, and expected number of missing links, are used to quantify errors associated with each ground truth cluster. Refer to the API documentation for full definitions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">er_evaluation.error_analysis</span> <span class="kn">import</span> <span class="p">(</span><span class="n">splitting_entropy</span><span class="p">,</span> <span class="n">expected_extra_links</span><span class="p">,</span> <span class="n">expected_missing_links</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_extra_links</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="go">sample</span>
<span class="go">c1    0.333333</span>
<span class="go">c2    0.500000</span>
<span class="go">c4    2.000000</span>
<span class="go">Name: expected_extra_links, dtype: float64</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_missing_links</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="go">sample</span>
<span class="go">c1    1.333333</span>
<span class="go">c2    1.000000</span>
<span class="go">c4    0.000000</span>
<span class="go">Name: expected_missing_links, dtype: float64</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">splitting_entropy</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="go">sample</span>
<span class="go">c1    1.889882</span>
<span class="go">c2    2.000000</span>
<span class="go">c4    1.000000</span>
<span class="go">Name: splitting_entropy_1, dtype: float64</span>
</pre></div>
</div>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="er_evaluation.error_analysis.count_extra_links">
<span class="sig-prename descclassname"><span class="pre">er_evaluation.error_analysis.</span></span><span class="sig-name descname"><span class="pre">count_extra_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/er_evaluation/error_analysis.html#count_extra_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#er_evaluation.error_analysis.count_extra_links" title="Permalink to this definition">#</a></dt>
<dd><p>Count the number of extraneous links to sampled clusters.</p>
<p>Given a predicted disambiguation <cite>prediction</cite> and a sample of true clusters <cite>sample</cite>, both represented as membership vectors, this functions returns the count of extraneous links for each true cluster. This is a pandas Series indexed by true cluster identifier and with values corresponding to the counts of extraneous links.</p>
<dl class="simple">
<dt>Count of Extraneous Links</dt><dd><p>For a given sampled cluster <span class="math notranslate nohighlight">\(c\)</span> with records <span class="math notranslate nohighlight">\(r \in c\)</span>, let <span class="math notranslate nohighlight">\(A_r\)</span> be the set of records which are erroneously linked to <span class="math notranslate nohighlight">\(r\)</span> in the predicted clustering. That is, if <span class="math notranslate nohighlight">\(\hat c(r)\)</span> is the predicted cluster containing <span class="math notranslate nohighlight">\(r\)</span>, then <span class="math notranslate nohighlight">\(A_r = \hat c(r) \backslash c\)</span> Then the count of extraneous links for <span class="math notranslate nohighlight">\(c\)</span> is <span class="math notranslate nohighlight">\(\sum_{r\in c} \lvert A_r \rvert\)</span>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>Series</em>) – Membership vector representing a predicted disambiguation.</p></li>
<li><p><strong>sample</strong> (<em>Series</em>) – Membership vector representing a set of true clusters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Pandas Series indexed by true cluster identifiers (unique values in <cite>sample</cite>) and with values corresponding to the count of extraneous links.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Series</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prediction</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c4&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">count_extra_links</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="go">sample</span>
<span class="go">c1    1</span>
<span class="go">c2    1</span>
<span class="go">c4    2</span>
<span class="go">Name: count_extra_links, dtype: int64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="er_evaluation.error_analysis.count_missing_links">
<span class="sig-prename descclassname"><span class="pre">er_evaluation.error_analysis.</span></span><span class="sig-name descname"><span class="pre">count_missing_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/er_evaluation/error_analysis.html#count_missing_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#er_evaluation.error_analysis.count_missing_links" title="Permalink to this definition">#</a></dt>
<dd><p>Count the number of missing links to sampled clusters.</p>
<p>Given a predicted disambiguation <cite>prediction</cite> and a sample of true clusters <cite>sample</cite>, both represented as membership vectors, this functions returns the count of missing links for each true cluster. This is a pandas Series indexed by true cluster identifier and with values corresponding to the counts of missing links.</p>
<dl class="simple">
<dt>Count of Missing Links</dt><dd><p>For a given sampled cluster <span class="math notranslate nohighlight">\(c\)</span> with records <span class="math notranslate nohighlight">\(r \in c\)</span>, let <span class="math notranslate nohighlight">\(B_r\)</span> be the set of records which are missing from the predicted cluster containing <span class="math notranslate nohighlight">\(r\)</span>. That is, if <span class="math notranslate nohighlight">\(\hat c(r)\)</span> is the predicted cluster containing <span class="math notranslate nohighlight">\(r\)</span>, then <span class="math notranslate nohighlight">\(B_r = c \backslash \hat c(r)\)</span>. Then the count of missing links for <span class="math notranslate nohighlight">\(c\)</span> is <span class="math notranslate nohighlight">\(\sum_{r\in c} \lvert B_r \rvert :math:\)</span>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>Series</em>) – Membership vector representing a predicted disambiguation.</p></li>
<li><p><strong>sample</strong> (<em>Series</em>) – Membership vector representing a set of true clusters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Pandas Series indexed by true cluster identifiers (unique values in <cite>sample</cite>) and with values corresponding to the count of extraneous links.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Series</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prediction</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c4&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">count_missing_links</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="go">sample</span>
<span class="go">c1    4</span>
<span class="go">c2    2</span>
<span class="go">c4    0</span>
<span class="go">Name: count_missing_links, dtype: int64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="er_evaluation.error_analysis.error_indicator">
<span class="sig-prename descclassname"><span class="pre">er_evaluation.error_analysis.</span></span><span class="sig-name descname"><span class="pre">error_indicator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/er_evaluation/error_analysis.html#error_indicator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#er_evaluation.error_analysis.error_indicator" title="Permalink to this definition">#</a></dt>
<dd><p>Error indicator metric.</p>
<p>Given a predicted disambiguation <cite>prediction</cite> and a sample of true clusters <cite>sample</cite>, both represented as membership vectors, this functions returns an indicator whether each true cluster matches a predicted cluster. This is a pandas Series indexed by true cluster identifier and with values corresponding to 0 or 1, depending on whether or not the true cluster matches a predicted cluster.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>Series</em>) – Membership vector representing a predicted disambiguation.</p></li>
<li><p><strong>sample</strong> (<em>Series</em>) – Membership vector representing a set of true clusters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Pandas Series indexed by true cluster identifiers (unique values in <cite>sample</cite>) and with values corresponding to the error indicator.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Series</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prediction</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c4&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">error_indicator</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="go">sample</span>
<span class="go">c1    1</span>
<span class="go">c2    1</span>
<span class="go">c4    0</span>
<span class="go">Name: error_indicator, dtype: int64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="er_evaluation.error_analysis.expected_extra_links">
<span class="sig-prename descclassname"><span class="pre">er_evaluation.error_analysis.</span></span><span class="sig-name descname"><span class="pre">expected_extra_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/er_evaluation/error_analysis.html#expected_extra_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#er_evaluation.error_analysis.expected_extra_links" title="Permalink to this definition">#</a></dt>
<dd><p>Expected number of extraneous links to records in sampled clusters.</p>
<p>Given a predicted disambiguation <cite>prediction</cite> and a sample of true clusters <cite>sample</cite>, both represented as membership vectors, this functions returns the expected number of extraneous links for each true cluster. This is a pandas Series indexed by true cluster identifier and with values corresponding to the expected number of extraneous links.</p>
<dl class="simple">
<dt>Expected Number of Extraneous Links</dt><dd><p>For a given sampled cluster <span class="math notranslate nohighlight">\(c\)</span> with records <span class="math notranslate nohighlight">\(r \in c\)</span>, let <span class="math notranslate nohighlight">\(A_r\)</span> be the set of records which are erroneously linked to <span class="math notranslate nohighlight">\(r\)</span> in the predicted clustering. That is, if <span class="math notranslate nohighlight">\(\hat c(r)\)</span> is the predicted cluster containing <span class="math notranslate nohighlight">\(r\)</span>, then <span class="math notranslate nohighlight">\(A_r = \hat c(r) \backslash c\)</span> Then the expected number of extraneous links for <span class="math notranslate nohighlight">\(c\)</span> is :math:` frac{1}{lvert c rvert}sum_{rin c} lvert A_r rvert`. This is the expected number of erroneous links to a random record <span class="math notranslate nohighlight">\(r \in c\)</span>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>Series</em>) – Membership vector representing a predicted disambiguation.</p></li>
<li><p><strong>sample</strong> (<em>Series</em>) – Membership vector representing a set of true clusters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Pandas Series indexed by true cluster identifiers (unique values in <cite>sample</cite>) and with values corresponding to the expected number of extraneous links.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Series</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prediction</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c4&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_extra_links</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="go">sample</span>
<span class="go">c1    0.333333</span>
<span class="go">c2    0.500000</span>
<span class="go">c4    2.000000</span>
<span class="go">Name: expected_extra_links, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="er_evaluation.error_analysis.expected_missing_links">
<span class="sig-prename descclassname"><span class="pre">er_evaluation.error_analysis.</span></span><span class="sig-name descname"><span class="pre">expected_missing_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/er_evaluation/error_analysis.html#expected_missing_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#er_evaluation.error_analysis.expected_missing_links" title="Permalink to this definition">#</a></dt>
<dd><p>Expected number of missing links to records in sampled clusters.</p>
<p>Given a predicted disambiguation <cite>prediction</cite> and a sample of true clusters <cite>sample</cite>, both represented as membership vectors, this functions returns the expected relative number of missing links for each true cluster. This is a pandas Series indexed by true cluster identifier and with values corresponding to the expected number of missing links.</p>
<dl class="simple">
<dt>Expected Number of Missing Links</dt><dd><p>For a given sampled cluster  <span class="math notranslate nohighlight">\(c\)</span> with records  <span class="math notranslate nohighlight">\(r \in c\)</span>, let <span class="math notranslate nohighlight">\(B_r\)</span> be the set of records which are missing from the predicted cluster containing <span class="math notranslate nohighlight">\(r\)</span>. That is, if <span class="math notranslate nohighlight">\(\hat c(r)\)</span> is the predicted cluster containing <span class="math notranslate nohighlight">\(r\)</span>, then <span class="math notranslate nohighlight">\(B_r = c \backslash \hat c(r)\)</span>. Then the expected number of missing links for <span class="math notranslate nohighlight">\(c\)</span> is <span class="math notranslate nohighlight">\(\frac{1}{\lvert c \rvert}\sum_{r\in c} \lvert B_r \rvert :math:\)</span>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>Series</em>) – Membership vector representing a predicted disambiguation.</p></li>
<li><p><strong>sample</strong> (<em>Series</em>) – Membership vector representing a set of true clusters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Pandas Series indexed by true cluster identifiers (unique values in <cite>sample</cite>) and with values corresponding to the expected number of missing links.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Series</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prediction</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c4&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_missing_links</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="go">sample</span>
<span class="go">c1    1.333333</span>
<span class="go">c2    1.000000</span>
<span class="go">c4    0.000000</span>
<span class="go">Name: expected_missing_links, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="er_evaluation.error_analysis.expected_relative_extra_links">
<span class="sig-prename descclassname"><span class="pre">er_evaluation.error_analysis.</span></span><span class="sig-name descname"><span class="pre">expected_relative_extra_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/er_evaluation/error_analysis.html#expected_relative_extra_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#er_evaluation.error_analysis.expected_relative_extra_links" title="Permalink to this definition">#</a></dt>
<dd><p>Expected relative number of extraneous links to records in sampled clusters.</p>
<p>Given a predicted disambiguation <cite>prediction</cite> and a sample of true clusters <cite>sample</cite>, both represented as membership vectors, this functions returns the expected number of relative extraneous links for each true cluster. This is a pandas Series indexed by true cluster identifier and with values corresponding to the expected number of relative extraneous links.</p>
<dl class="simple">
<dt>Expected Relative Number of Extraneous Links</dt><dd><p>For a given sampled cluster <span class="math notranslate nohighlight">\(c\)</span> with records <span class="math notranslate nohighlight">\(r \in c\)</span>, let <span class="math notranslate nohighlight">\(A_r\)</span> be the set of records which are erroneously linked to <span class="math notranslate nohighlight">\(r\)</span> in the predicted clustering. That is, if <span class="math notranslate nohighlight">\(\hat c(r)\)</span> is the predicted cluster containing <span class="math notranslate nohighlight">\(r\)</span>, then <span class="math notranslate nohighlight">\(A_r = \hat c(r) \backslash c\)</span> Then the expected number of extraneous links for <span class="math notranslate nohighlight">\(c\)</span> is :math:` frac{1}{lvert c rvert}sum_{rin c} lvert A_r rvert / lvert hat c(r) rvert`. This is the expected relative number of erroneous links to a random record <span class="math notranslate nohighlight">\(r \in c\)</span>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>Series</em>) – Membership vector representing a predicted disambiguation.</p></li>
<li><p><strong>sample</strong> (<em>Series</em>) – Membership vector representing a set of true clusters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Pandas Series indexed by true cluster identifiers (unique values in <cite>sample</cite>) and with values corresponding to the expected number of extraneous links.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Series</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prediction</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c4&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_relative_extra_links</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="go">sample</span>
<span class="go">c1    0.166667</span>
<span class="go">c2    0.250000</span>
<span class="go">c4    0.666667</span>
<span class="go">Name: expected_relative_extra_links, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="er_evaluation.error_analysis.expected_relative_missing_links">
<span class="sig-prename descclassname"><span class="pre">er_evaluation.error_analysis.</span></span><span class="sig-name descname"><span class="pre">expected_relative_missing_links</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/er_evaluation/error_analysis.html#expected_relative_missing_links"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#er_evaluation.error_analysis.expected_relative_missing_links" title="Permalink to this definition">#</a></dt>
<dd><p>Expected relative number of missing links to records in sampled clusters.</p>
<p>Given a predicted disambiguation <cite>prediction</cite> and a sample of true clusters <cite>sample</cite>, both represented as membership vectors, this functions returns the expected number of missing links for each true cluster. This is a pandas Series indexed by true cluster identifier and with values corresponding to the expected relative number of missing links.</p>
<dl class="simple">
<dt>Expected Relative Number of Missing Links</dt><dd><p>For a given sampled cluster  <span class="math notranslate nohighlight">\(c\)</span> with records  <span class="math notranslate nohighlight">\(r \in c\)</span>, let <span class="math notranslate nohighlight">\(B_r\)</span> be the set of records which are missing from the predicted cluster containing <span class="math notranslate nohighlight">\(r\)</span>. That is, if <span class="math notranslate nohighlight">\(\hat c(r)\)</span> is the predicted cluster containing <span class="math notranslate nohighlight">\(r\)</span>, then <span class="math notranslate nohighlight">\(B_r = c \backslash \hat c(r)\)</span>. Then the expected number of missing links for <span class="math notranslate nohighlight">\(c\)</span> is <span class="math notranslate nohighlight">\(\frac{1}{\lvert c \rvert}\sum_{r\in c} \lvert B_r \rvert / \lvert c \rvert :math:\)</span>.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>Series</em>) – Membership vector representing a predicted disambiguation.</p></li>
<li><p><strong>sample</strong> (<em>Series</em>) – Membership vector representing a set of true clusters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Pandas Series indexed by true cluster identifiers (unique values in <cite>sample</cite>) and with values corresponding to the expected relative number of missing links.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Series</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prediction</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c4&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">expected_relative_missing_links</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="go">sample</span>
<span class="go">c1    0.444444</span>
<span class="go">c2    0.500000</span>
<span class="go">c4    0.000000</span>
<span class="go">Name: expected_relative_missing_links, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="er_evaluation.error_analysis.splitting_entropy">
<span class="sig-prename descclassname"><span class="pre">er_evaluation.error_analysis.</span></span><span class="sig-name descname"><span class="pre">splitting_entropy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prediction</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/er_evaluation/error_analysis.html#splitting_entropy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#er_evaluation.error_analysis.splitting_entropy" title="Permalink to this definition">#</a></dt>
<dd><p>Splitting entropy of true clusters.</p>
<p>This function returns the splitting entropy, defined below, of each entity represented in the sampled clusters <cite>sample</cite>.</p>
<dl>
<dt>Splitting Entropy:</dt><dd><p>Let <span class="math notranslate nohighlight">\(\hat{\mathcal{C}}\)</span> be a clustering of records <span class="math notranslate nohighlight">\(\mathcal{R}\)</span> into <strong>predicted</strong> entities. For a given entity represented by a cluster <span class="math notranslate nohighlight">\(c\)</span>, the splitting entropy is defined as the exponentiated Shannon entropy of the set of cluster sizes <span class="math notranslate nohighlight">\(\{\lvert \hat c \cap c \rvert \mid \hat c \in \widehat{\mathcal{C}},\, \lvert \hat c \cap c \rvert &gt; 0 \}\)</span>. That is, with using the convention that <span class="math notranslate nohighlight">\(0 \cdot \log (0) = 0\)</span>, we have</p>
<div class="math notranslate nohighlight">
\[E_{\text{split}}(c) = \exp\left \{-\sum_{\hat c \in \widehat{\mathcal{C}}} \frac{\lvert\hat c \cap c \rvert}{\sum_{\hat c' \in \widehat{\mathcal{C}}} \lvert \hat c' \cap c \rvert } \log \left(\frac{\lvert\hat c \cap c \rvert}{\sum_{\hat c' \in \widehat{\mathcal{C}}} \lvert \hat c' \cap c \rvert }\right) \right \}.\]</div>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prediction</strong> (<em>Series</em>) – Membership vector representing a predicted disambiguation.</p></li>
<li><p><strong>sample</strong> (<em>Series</em>) – Membership vector representing a set of true clusters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Pandas Series indexed by true cluster identifiers (unique values in <cite>sample</cite>) and with values corresponding to the splitting entropy.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Series</p>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">prediction</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sample</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">],</span> <span class="n">data</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c1&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c2&quot;</span><span class="p">,</span> <span class="s2">&quot;c4&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">splitting_entropy</span><span class="p">(</span><span class="n">prediction</span><span class="p">,</span> <span class="n">sample</span><span class="p">)</span>
<span class="go">sample</span>
<span class="go">c1    1.889882</span>
<span class="go">c2    2.000000</span>
<span class="go">c4    1.000000</span>
<span class="go">Name: splitting_entropy_1, dtype: float64</span>
</pre></div>
</div>
</dd></dl>

</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="er_evaluation.metrics.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">er_evaluation.metrics</p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="er_evaluation.plots.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">er_evaluation.plots</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contents">
   Contents
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#module-er_evaluation.error_analysis">
   Documentation
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#error-analysis-analyze-errors-based-on-ground-truth-clusters">
     Error Analysis: Analyze Errors Based on Ground Truth Clusters
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#er_evaluation.error_analysis.count_extra_links">
     <code class="docutils literal notranslate">
      <span class="pre">
       count_extra_links()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#er_evaluation.error_analysis.count_missing_links">
     <code class="docutils literal notranslate">
      <span class="pre">
       count_missing_links()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#er_evaluation.error_analysis.error_indicator">
     <code class="docutils literal notranslate">
      <span class="pre">
       error_indicator()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#er_evaluation.error_analysis.expected_extra_links">
     <code class="docutils literal notranslate">
      <span class="pre">
       expected_extra_links()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#er_evaluation.error_analysis.expected_missing_links">
     <code class="docutils literal notranslate">
      <span class="pre">
       expected_missing_links()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#er_evaluation.error_analysis.expected_relative_extra_links">
     <code class="docutils literal notranslate">
      <span class="pre">
       expected_relative_extra_links()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#er_evaluation.error_analysis.expected_relative_missing_links">
     <code class="docutils literal notranslate">
      <span class="pre">
       expected_relative_missing_links()
      </span>
     </code>
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#er_evaluation.error_analysis.splitting_entropy">
     <code class="docutils literal notranslate">
      <span class="pre">
       splitting_entropy()
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
<div class="tocsection sourcelink">
    <a href="_sources/er_evaluation.error_analysis.rst.txt">
        <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
</div>

</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2022, Olivier Binette.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">
        PyData Sphinx Theme
    </a>
    0.12.0.
</p>
  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>